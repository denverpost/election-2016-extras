<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width">
    <title>Colorado Mail Ballot Chart</title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.css">
    <link rel="canonical" href="http://www.denverpost.com/2016/10/24/colorado-2016-ballot-tracker-a-look-at-mail-ballot-return-data/">
</head>

<body>
    <div id="ballot-chart"></div>
    <h3>2016 Colorado ballot distribution by party</h3>
    <div id="ballot-donut"></div>
    <script src="http://d3js.org/d3.v3.min.js " charset="utf-8"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.js"></script>
    <script>
    var colors = {
        'DEM': 'rgba(5,113,176,1.0)',
        'REP': 'rgba(202,0,32,1.0)',
        'UAF': 'rgba(123,50,148,1.0)',
        'LBR': 'rgba(253,174,97,1.0)',
        'OTHER': 'rgba(171,221,164,1.0)',
    };
    var current = {
        dem: 399341,
        rep: 371746,
        uaf: 281845,
        lbr: 9418,
        other: 5335};
    var donut_chart = c3.generate({
        bindto: '#ballot-donut',
        data: {
            columns: [
                ['2016 Democrat', current.dem],
                ['2016 Republican', current.rep],
                ['2016 Unaffiliated', current.uaf],
                ['2016 Libertarian', current.lbr],
                ['2016 Other Party', current.other],
            ],
            colors: {
                '2016 Democrat': colors.DEM,
                '2016 Republican': colors.REP,
                '2016 Unaffiliated': colors.UAF,
                '2016 Libertarian': colors.LBR,
                '2016 Other Party': colors.OTHER
            },
            type : 'donut',
            onclick: function (d, i) { console.log("onclick", d, i); },
            onmouseover: function (d, i) { console.log("onmouseover", d, i); },
            onmouseout: function (d, i) { console.log("onmouseout", d, i); }
        },
        donut: { title: "Mail ballots by party" }
    });

    var chart = c3.generate({
        size: {
            height: 400
        },
        padding: {
            top: 0,
            right: 25,
            bottom: 0,
            left: 90
        },
        bindto: '#ballot-chart',
        data: {
            columns: [
                ['DEM 2016', 48030, 117766, 166605, 224914, 269066, 269066, 269066, 331153, current.dem], // 2016 daily totals
                ['DEM 2014', 24468, 64777, 105401, 139410, 164443, 164443, 164443, 213975, 251174, 294648, 337897, 371190, 371190, 371190, 446448, 564488, 662042],
                ['REP 2016', 36790, 94499, 141354, 196082, 241750, 241750, 241750, 300275, current.rep], // 2016 daily totals
                ['REP 2014', 36830, 91060, 145824, 190235, 226923, 226923, 226923, 282317, 332200, 379250, 433240, 475677, 475677, 475677, 558966, 693983, 774229],
                ['UAF 2016', 27435, 70410, 103354, 143866, 177225, 177225, 177225, 223540, current.uaf], // 2016 daily totals
                ['UAF 2014', 17191, 46404, 77285, 102031, 121812, 121812, 121812, 156893, 187485, 222043, 259947, 290600, 290600, 290600, 359496, 491591, 605182],
                ['LBR 2016', 1054, 2531, 3581, 4866, 5961, 5961, 5961, 7480, current.lbr], // 2016 daily totals
                ['LBR 2014', 537, 1370, 2185, 2829, 3343, 4242, 4242, 4242, 5011, 5831, 6763, 7498, 7498, 7498, 9211, 12934, 16372],
                ['OTHER 2016', 623, 1433, 2057, 2822, 3412, 3412, 3412, 4220, current.other], // 2016 daily totals: ACN, GRN, UNI combined
                ['OTHER 2014', 329, 869, 1355, 1773, 2089, 2686, 2686, 2686, 3174, 3728, 4313, 4780, 4780, 4780, 5841, 8002, 9895]
            ],
            type: 'line',
            labels: false,
            colors: {
                'DEM 2016': 'rgba(5,113,176,1.0)',
                'DEM 2014': 'rgba(5,113,176,0.3)',
                'REP 2016': 'rgba(202,0,32,1.0)',
                'REP 2014': 'rgba(202,0,32,0.3)',
                'UAF 2016': 'rgba(123,50,148,1.0)',
                'UAF 2014': 'rgba(123,50,148,0.3)',
                'LBR 2016': 'rgba(253,174,97,1.0)',
                'LBR 2014': 'rgba(253,174,97,0.3)',
                'OTHER 2016': 'rgba(171,221,164,1.0)',
                'OTHER 2014': 'rgba(171,221,164,0.3)'
            }
        },
        axis: {
            x: {
                type: 'category',
                categories: ['16 days to the election', '15 days', '14 days', '13 days', '12 days', '11 days', '10 days', '9 days', '8 days', '7 days', '6 days', '5 days', '4 days', '3 days', '2 days', '1 day', 'Election Day'],
                tick: {
                    rotate: 75,
                    multiline: false
                }
            },
            y: {
                tick: {
                    format: d3.format(",")
                },
                label: {
                    text: 'Mail ballots returned',
                    position: 'outer-middle'
                }
            }
        },
        legend: {
            position: 'inset'
        },
        grid: {
            y: {
                show: false
            }
        },
        tooltip: {
            format: {
                value: function(value) {
                    return d3.format(",")(value)
                }
            }
        }
    });
    </script>
</body>

</html>
